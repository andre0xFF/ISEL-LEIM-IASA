<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IASA-P01</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<style>
body {
    background-color: white;
    margin-top: 100px;
}
.container {
    max-width: 900px;
    text-align: justify;
}
</style>
</head>
<body><div class="container"><p align="center">
    <img width="30%" height="30%" src="https://lh5.googleusercontent.com/-vYrwAHpi3Rw/AAAAAAAAAAI/AAAAAAAAAC8/wM0Oxu8ZzDk/photo.jpg">
</p>



<h1 id="high-institute-of-engineering-of-lisbon"><p align="center">HIGH INSTITUTE OF ENGINEERING OF LISBON</p></h1>



<h1 id="artificial-intelligence-for-autonomous-systems"><p align="center">ARTIFICIAL INTELLIGENCE FOR AUTONOMOUS SYSTEMS</p></h1>

<p align="center">André Fonseca 39758</p>

<p align="center">afbfonseca@gmail.com</p>

<p><br></p>

<p align="center">March 2017</p>

<hr>



<h1 id="table-of-contents">Table of contents</h1>

<p><div class="toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#1-problem-analysis">1. Problem analysis</a><ul>
<li><a href="#11-agent-nature">1.1 Agent nature</a></li>
<li><a href="#12-environment-nature">1.2 Environment nature</a></li>
<li><a href="#13-agent-program">1.3 Agent program</a></li>
</ul>
</li>
<li><a href="#2-models">2. Models</a><ul>
<li><a href="#21-crc-diagrams">2.1 CRC diagrams</a></li>
<li><a href="#22-agent-behaviour-state-machine">2.2 Agent behaviour state machine</a></li>
</ul>
</li>
<li><a href="#3-implementation">3. Implementation</a></li>
<li><a href="#4-results">4. Results</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>
</p>

<h1 id="introduction">Introduction</h1>

<p>This project simulates the interactions between an agent and an environment which the agent belongs to.</p>

<p>When the simulation starts the gatekeeper goes into patrol mode. In case of hearing a noise the gatekeeper inspects the area, searching for the noise’s origin. If there is no longer any noise, then he continues to patrol.</p>

<p>At any time the gatekeeper may encounter an enemy and in that case he must protect the area and warn the foe to retreat. In this situation, if the enemy backs off, he will remain inspecting the area for any source of noise. In case the enemy persists, the gatekeeper will have to defend himself and fight the threat.</p>

<p>In combat situation two actions may occur. The gatekeeper can be victorious and defeat the enemy and, then, he goes back to patrol; or in case of defeat the simulation is restarted.</p>

<p>The interaction, at any level, is made by text inputs and outputs.</p>



<h1 id="1-problem-analysis">1. Problem analysis</h1>

<p>The initial structure of the problem will be decomposed into two roles based on the description of the problem. The first and most obvious role will be the gatekeeper, which will be an autonomous agent and the environment that will provide some type of perceptions to the agent.</p>



<h2 id="11-agent-nature">1.1 Agent nature</h2>

<p>The characteristics of the agent can be grouped into a set of design rules - the task environment or PEAS model (Performance, Environment, Actuators, Sensors).</p>

<table>
<thead>
<tr>
  <th align="center">Agent type</th>
  <th align="center">Performance</th>
  <th align="center">Environment</th>
  <th align="center">Actuators</th>
  <th align="center">Sensors</th>
</tr>
</thead>
<tbody><tr>
  <td align="center">Gatekeeper</td>
  <td align="center">Area safety</td>
  <td align="center">Computer simulation</td>
  <td align="center">Text input</td>
  <td align="center">Text output</td>
</tr>
</tbody></table>




<h2 id="12-environment-nature">1.2 Environment nature</h2>

<p>The environment where the agent will operate needs to be categorized in order to better design the agent:</p>

<ul>
<li><p><strong>Fully observable (and known)</strong>: The simulation will occur in a closed and controlled environment and the agent can fully observe the entire environment because the agent’s sensors will be able to detect all aspects that are relevant to the choice of actions;</p></li>
<li><p><strong>Single agent</strong>: As there are not other agents trying to modifying the agent’s performance measurement;</p></li>
<li><p><strong>Deterministic</strong>: The next state of the environment is completely determined by the current state and the action executed by the agent;</p></li>
<li><p><strong>Static</strong>: The environment does not change while the agent is deliberating;</p></li>
<li><p><strong>Discrete</strong>: The agent’s percepts won’t change as time goes by.</p></li>
</ul>



<h2 id="13-agent-program">1.3 Agent program</h2>

<p>The base structure of the agent program is to map the agent’s percepts to certain actions.</p>

<ul>
<li><strong>Simple reflex agent</strong>: In this problem it is not necessary for the agent to remember his past regarding percepts and actions; because his action depends only on the current percept provided by the environment.</li>
</ul>



<h1 id="2-models">2. Models</h1>



<h2 id="21-crc-diagrams">2.1 CRC diagrams</h2>

<p>To represent the classes to be used a CRC (Class, Responsibility, Collaborator) card diagram will be designed.</p>

<p><em>Unlike in a typical UML class diagram, where a lot of guessing happens when trying to figure out the methods and type of fields, a CRC diagram sketches the responsibility and relationship of each and between elements ending with the simplest possible design resulting in no guess work, less complexity, faster prototyping and dependencies are obvious.</em></p>

<p><em>When sketching the CRC diagram if one card contains too many responsibilities it might be an hint that something may be wrong. Too many responsibilities violates the <a href="https://scotch.io/bar-talk/s-o-l-i-d-the-first-five-principles-of-object-oriented-design">SOLID</a> principles.</em></p>

<p align="center">
    <img src="http://preview.ibb.co/jSo03v/CRC.png">
</p>



<h2 id="22-agent-behaviour-state-machine">2.2 Agent behaviour state machine</h2>

<p>The character can transit between states based on the environment events. The transitions are defined by the state machine diagram:</p>

<p align="center">
    <img src="https://image.ibb.co/cmfGtv/RApfy_VTcw_Ypn.png">
</p>



<h1 id="3-implementation">3. Implementation</h1>

<p>The initial game execution starts evolving the environment and by executing the character, the environment returns the current event and character the current state which both are printed to the console. This sequence of actions runs until the Environment return the exit EnvironmentEvent.</p>



<pre class="prettyprint"><code class="language-java hljs ">`game.java`

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">execute_game</span>() {

    Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);
    EnvironmentEvent event;

    String event_name = <span class="hljs-string">""</span>;
    String behavior_name = <span class="hljs-string">""</span>;
    String input = <span class="hljs-string">""</span>;

    do {
        <span class="hljs-keyword">this</span>.environment.evolve(input);
        event_name = <span class="hljs-keyword">this</span>.environment.show();

        <span class="hljs-keyword">this</span>.character.execute();
        behavior_name = <span class="hljs-keyword">this</span>.character.show();

        System.out.printf(<span class="hljs-string">"[ %7s @ %-10s ]$ "</span>, event_name, behavior_name);
        input = scanner.next();

        event = environment.get_event();

    } <span class="hljs-keyword">while</span>(event == <span class="hljs-keyword">null</span> ? <span class="hljs-keyword">true</span> : event != EnvironmentEvent.EXIT);
}</code></pre>

<p>The Environment has a collection of EnvironmentEvents that are mapped based on the text input by the user. The environment’s evolution simply stored the current event.</p>



<pre class="prettyprint"><code class="language-java hljs ">`environment.java`

    <span class="hljs-keyword">private</span> Map&lt;String, EnvironmentEvent&gt; events = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();;
    <span class="hljs-keyword">private</span> EnvironmentEvent event;

    <span class="hljs-keyword">public</span> <span class="hljs-title">Environment</span>() {
        <span class="hljs-comment">// Populate environment events</span>
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"EXIT"</span>, EnvironmentEvent.EXIT);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"NOISE"</span>, EnvironmentEvent.NOISE);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"SILENCE"</span>, EnvironmentEvent.SILENCE);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"ENEMY"</span>, EnvironmentEvent.ENEMY);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"FLEE"</span>, EnvironmentEvent.FLEE);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"VICTORY"</span>, EnvironmentEvent.VICTORY);
        <span class="hljs-keyword">this</span>.events.put(<span class="hljs-string">"DEFEAT"</span>, EnvironmentEvent.DEFEAT);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">evolve</span>(String input) {
        <span class="hljs-keyword">this</span>.event = <span class="hljs-keyword">this</span>.events.get(input.toUpperCase());
    }</code></pre>

<p>The character line of execution starts by sensor’ing a percept from the environment, converts the percept into an usable action.</p>



<pre class="prettyprint"><code class="language-java hljs ">`character.java`

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">execute</span>() {
        Stimulus stimulus = <span class="hljs-keyword">this</span>.percept();

        <span class="hljs-keyword">if</span> (stimulus != <span class="hljs-keyword">null</span>) {
            Action action = <span class="hljs-keyword">this</span>.process(stimulus);
            <span class="hljs-keyword">this</span>.behave(action);
        }
    }

    <span class="hljs-keyword">private</span> Stimulus <span class="hljs-title">percept</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.environment.get_event();
    }

    <span class="hljs-keyword">private</span> Action <span class="hljs-title">process</span>(Stimulus stimulus) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.behavior.activate(stimulus);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">behave</span>(Action action) {
        <span class="hljs-keyword">if</span>(action != <span class="hljs-keyword">null</span>) {
            action.execute();
        }
    }</code></pre>



<h1 id="4-results">4. Results</h1>

<p>Example output #1</p>



<pre class="prettyprint"><code class=" hljs css"><span class="hljs-attr_selector">[         @ PATROL     ]</span>$ <span class="hljs-tag">noise</span>
<span class="hljs-attr_selector">[   NOISE @ INSPECTION ]</span>$ <span class="hljs-tag">enemy</span>
<span class="hljs-attr_selector">[   ENEMY @ DEFEND     ]</span>$ <span class="hljs-tag">enemy</span>
<span class="hljs-attr_selector">[   ENEMY @ ATTACK     ]</span>$ <span class="hljs-tag">victory</span>
<span class="hljs-attr_selector">[ VICTORY @ PATROL     ]</span>$</code></pre>

<p>Example output #2</p>



<pre class="prettyprint"><code class=" hljs css"><span class="hljs-attr_selector">[         @ PATROL     ]</span>$ <span class="hljs-tag">silence</span>
<span class="hljs-attr_selector">[ SILENCE @ PATROL     ]</span>$ <span class="hljs-tag">silence</span>
<span class="hljs-attr_selector">[ SILENCE @ PATROL     ]</span>$ <span class="hljs-tag">noise</span>
<span class="hljs-attr_selector">[   NOISE @ INSPECTION ]</span>$ <span class="hljs-tag">silence</span>
<span class="hljs-attr_selector">[ SILENCE @ PATROL     ]</span>$ <span class="hljs-tag">enemy</span>
<span class="hljs-attr_selector">[   ENEMY @ DEFEND     ]</span>$ <span class="hljs-tag">flee</span>
<span class="hljs-attr_selector">[    FLEE @ INSPECTION ]</span>$ <span class="hljs-tag">silence</span>
<span class="hljs-attr_selector">[ SILENCE @ PATROL     ]</span>$</code></pre>



<h1 id="references">References</h1>

<ol>
<li>Artificial Intelligence, A Modern Approach by Stuart Russell and Peter Norvig</li>
</ol></div></body>
</html>
